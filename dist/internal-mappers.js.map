{"version":3,"sources":["webpack://checkoutKit/webpack/bootstrap","webpack://checkoutKit/external \"tslib\"","webpack://checkoutKit/./src/customer/map-to-internal-customer.ts","webpack://checkoutKit/./src/coupon/map-to-internal-gift-certificate.ts","webpack://checkoutKit/./src/order/map-to-internal-order.ts","webpack://checkoutKit/./src/quote/map-to-internal-quote.ts","webpack://checkoutKit/./src/bundles/internal-mappers.ts","webpack://checkoutKit/external \"lodash\"","webpack://checkoutKit/./src/common/utility/index.ts","webpack://checkoutKit/./src/cart/index.ts","webpack://checkoutKit/./src/order/index.ts","webpack://checkoutKit/./src/coupon/index.ts","webpack://checkoutKit/./src/shipping/map-to-internal-shipping-options.ts","webpack://checkoutKit/./src/shipping/index.ts","webpack://checkoutKit/./src/common/utility/is-equal.ts","webpack://checkoutKit/./src/address/index.ts","webpack://checkoutKit/./src/payment/payment-method-types.ts","webpack://checkoutKit/./src/cart/amount-transformer.ts","webpack://checkoutKit/./src/customer/index.ts","webpack://checkoutKit/./src/cart/map-to-internal-line-items.ts","webpack://checkoutKit/./src/common/utility/cache-key-resolver.ts","webpack://checkoutKit/./src/cart/map-gift-certificate-to-internal-line-item.ts","webpack://checkoutKit/./src/cart/map-to-internal-line-item.ts","webpack://checkoutKit/./src/cart/map-to-internal-cart.ts","webpack://checkoutKit/./src/promotion/map-to-discount-notifications.ts","webpack://checkoutKit/./src/shipping/map-to-internal-shipping-option.ts","webpack://checkoutKit/./src/coupon/map-to-internal-coupon.ts","webpack://checkoutKit/./src/address/map-to-internal-address.ts","webpack://checkoutKit/./src/billing/is-billing-address-like.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","require","__webpack_exports__","mapToInternalCustomer","_address__WEBPACK_IMPORTED_MODULE_0__","customer","billingAddress","firstName","lastName","addresses","map","address","customerId","id","isGuest","storeCredit","email","fullName","join","mapToInternalGiftCertificate","giftCertificate","code","discountedAmount","used","remainingBalance","remaining","balance","purchaseDate","mapToInternalOrder","lodash__WEBPACK_IMPORTED_MODULE_0__","_cart__WEBPACK_IMPORTED_MODULE_1__","_cart__WEBPACK_IMPORTED_MODULE_2__","_coupon__WEBPACK_IMPORTED_MODULE_3__","order","orderMeta","payments","items","decimalPlaces","currency","amountTransformer","orderId","lineItems","customerCanBeCreated","payment","mapToInteralOrderPayment","subtotal","amount","baseAmount","integerAmount","toInteger","coupon","coupons","sum","discount","discountAmount","token","orderToken","callbackUrl","discountNotifications","providerId","totalDiscountedAmount","item","appliedGiftCertificates","detail","socialData","mapToInternalSocialDataList","status","hasDigitalItems","isDownloadable","isComplete","shipping","shippingCostTotal","amountBeforeDiscount","shippingCostBeforeDiscount","integerAmountBeforeDiscount","mapToStoreCredit","taxes","taxTotal","handling","handlingCostTotal","grandTotal","orderAmount","orderAmountAsInteger","mapToInternalPaymentStatus","isDefaultOrderPayment","step","helpText","instructions","returnUrl","socialDataObject","physicalItems","concat","digitalItems","forEach","lineItem","reduce","socialMedia","find","description","image","imageUrl","url","link","shareText","text","sharingLink","channelName","channel","channelCode","mapToInternalQuote","checkout","shippingAddress","consignment","consignments","orderComment","customerMessage","shippingOption","selectedShippingOption","undefined","map_to_internal_address","cart","utility","_cache_key_resolver__WEBPACK_IMPORTED_MODULE_0__","_map_to_internal_cart__WEBPACK_IMPORTED_MODULE_0__","_map_to_internal_line_item__WEBPACK_IMPORTED_MODULE_1__","_map_to_internal_line_items__WEBPACK_IMPORTED_MODULE_2__","_map_to_internal_order__WEBPACK_IMPORTED_MODULE_0__","_map_to_internal_coupon__WEBPACK_IMPORTED_MODULE_0__","_map_to_internal_gift_certificate__WEBPACK_IMPORTED_MODULE_1__","mapToInternalShippingOptions","result","shippingOptions","availableShippingOptions","length","external_tslib_","_a","option","selectedOptionId","map_to_internal_shipping_option","isEqual","objectA","objectB","options","Array","isArray","index","length_1","isArrayEqual","Date","getTime","isDateEqual","RegExp","toString","isRegExpEqual","filter","keyFilter","keysA","keys","keysB","length_2","isObjectEqual","_map_to_internal_address__WEBPACK_IMPORTED_MODULE_0__","HOSTED","OFFLINE","AmountTransformer","_dp","this","Math","floor","pow","_map_to_internal_customer__WEBPACK_IMPORTED_MODULE_0__","mapToInternalLineItems","_map_gift_certificate_to_internal_line_item__WEBPACK_IMPORTED_MODULE_0__","itemMap","idKey","type","mapToInternalLineItemType","_is_equal__WEBPACK_IMPORTED_MODULE_0__","CacheKeyResolver","_lastId","_maps","getKey","args","_i","arguments","_resolveMap","apply","parentMaps","cacheKey","usedCount","_generateKey","slice","getUsedCount","isMatched","parentMaps_1","maps","push","mapGiftCertificateToInternalLineItem","___WEBPACK_IMPORTED_MODULE_0__","amountAfterDiscount","integerAmountAfterDiscount","integerDiscount","quantity","sender","recipient","attributes","variantId","mapToInternalLineItem","_amount_transformer__WEBPACK_IMPORTED_MODULE_0__","extendedListPrice","extendedSalePrice","downloadsPageUrl","downloadPageUrl","brand","categoryNames","productId","addedByPromotion","mapToInternalCart","promotions","notifications","amount_transformer","map_to_internal_line_items","external_lodash_","map_to_internal_coupon","promotion","banners","banner","placeholders","discountType","message","messageHtml","giftCertificates","certificate","map_to_internal_gift_certificate","required","isShippingRequired","taxSubtotal","mapToInternalShippingOption","isSelected","price","cost","selected","isRecommended","transitTime","mapToInternalCoupon","couponTypes","displayName","indexOf","couponType","mapToInternalAddress","addressId","isBillingAddressLike","company","addressLine1","address1","addressLine2","address2","city","province","stateOrProvince","provinceCode","stateOrProvinceCode","postCode","postalCode","country","countryCode","phone","customFields"],"mappings":"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","file":"internal-mappers.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 185);\n","module.exports = require(\"tslib\");","import { mapToInternalAddress } from '../address';\nimport { BillingAddress } from '../billing';\n\nimport { Customer } from '.';\nimport InternalCustomer from './internal-customer';\n\n/**\n * @deprecated This mapper is only for internal use only. It is required during\n * the transition period as we are moving to adopt the new storefront API object\n * schema.\n */\nexport default function mapToInternalCustomer(customer: Customer, billingAddress: BillingAddress): InternalCustomer {\n    const firstName = customer.firstName || billingAddress.firstName || '';\n    const lastName = customer.lastName || billingAddress.lastName || '';\n\n    return {\n        addresses: (customer.addresses || []).map(address => mapToInternalAddress(address)),\n        customerId: customer.id,\n        isGuest: customer.isGuest,\n        storeCredit: customer.storeCredit,\n        email: customer.email || billingAddress.email || '',\n        firstName,\n        lastName,\n        name: customer.fullName || [firstName, lastName].join(' '),\n    };\n}\n","import GiftCertificate from './gift-certificate';\nimport InternalGiftCertificate from './internal-gift-certificate';\n\n/**\n * @deprecated This mapper is only for internal use only. It is required during\n * the transition period as we are moving to adopt the new storefront API object\n * schema.\n */\nexport default function mapToInternalGiftCertificate(giftCertificate: GiftCertificate): InternalGiftCertificate {\n    return {\n        code: giftCertificate.code,\n        discountedAmount: giftCertificate.used,\n        remainingBalance: giftCertificate.remaining,\n        giftCertificate: {\n            balance: giftCertificate.balance,\n            code: giftCertificate.code,\n            purchaseDate: giftCertificate.purchaseDate,\n        },\n    };\n}\n","import { filter, find, keyBy, reduce } from 'lodash';\n\nimport { AmountTransformer, LineItem } from '../cart';\nimport { mapToInternalLineItems } from '../cart';\nimport { Checkout } from '../checkout';\nimport { mapToInternalCoupon } from '../coupon';\nimport { HOSTED } from '../payment';\n\nimport InternalOrder, { InternalGiftCertificateList, InternalIncompleteOrder, InternalOrderPayment, InternalSocialDataList } from './internal-order';\nimport Order, { GatewayOrderPayment, GiftCertificateOrderPayment, OrderPayment, OrderPayments } from './order';\nimport { OrderMetaState } from './order-state';\n\n/**\n * @deprecated This mapper is only for internal use only. It is required during\n * the transition period as we are moving to adopt the new storefront API object\n * schema.\n */\nexport default function mapToInternalOrder(order: Order, orderMeta: OrderMetaState = {}): InternalOrder {\n    const decimalPlaces = order.currency.decimalPlaces;\n    const amountTransformer = new AmountTransformer(decimalPlaces);\n\n    return {\n        id: order.orderId,\n        items: mapToInternalLineItems(order.lineItems, order.currency.decimalPlaces, 'productId'),\n        orderId: order.orderId,\n        currency: order.currency.code,\n        customerCanBeCreated: order.customerCanBeCreated,\n        payment: mapToInteralOrderPayment(order.payments, orderMeta.payment),\n        subtotal: {\n            amount: order.baseAmount,\n            integerAmount: amountTransformer.toInteger(order.baseAmount),\n        },\n        coupon: {\n            discountedAmount: reduce(order.coupons, (sum, coupon) => {\n                return sum + coupon.discountedAmount;\n            }, 0),\n            coupons: order.coupons.map(mapToInternalCoupon),\n        },\n        discount: {\n            amount: order.discountAmount,\n            integerAmount: amountTransformer.toInteger(order.discountAmount),\n        },\n        token: orderMeta.orderToken,\n        callbackUrl: orderMeta.callbackUrl,\n        discountNotifications: [],\n        giftCertificate: mapToGiftCertificates(order.payments),\n        socialData: mapToInternalSocialDataList(order),\n        status: order.status,\n        hasDigitalItems: order.hasDigitalItems,\n        isDownloadable: order.isDownloadable,\n        isComplete: order.isComplete,\n        shipping: {\n            amount: order.shippingCostTotal,\n            integerAmount: amountTransformer.toInteger(order.shippingCostTotal),\n            amountBeforeDiscount: order.shippingCostBeforeDiscount,\n            integerAmountBeforeDiscount: amountTransformer.toInteger(order.shippingCostBeforeDiscount),\n        },\n        storeCredit: {\n            amount: mapToStoreCredit(order.payments),\n        },\n        taxes: order.taxes,\n        taxTotal: {\n            amount: order.taxTotal,\n            integerAmount: amountTransformer.toInteger(order.taxTotal),\n        },\n        handling: {\n            amount: order.handlingCostTotal,\n            integerAmount: amountTransformer.toInteger(order.handlingCostTotal),\n        },\n        grandTotal: {\n            amount: order.orderAmount,\n            integerAmount: order.orderAmountAsInteger,\n        },\n    };\n}\n\nexport function mapToInternalIncompleteOrder(checkout: Checkout): InternalIncompleteOrder {\n    const payment = find(checkout.payments, { providerType: HOSTED });\n\n    return {\n        orderId: null,\n        isComplete: false,\n        payment: !payment ? {} : {\n            id: payment.providerId,\n            gateway: payment.gatewayId,\n            status: mapToInternalPaymentStatus(payment.detail.step),\n        },\n    };\n}\n\nfunction mapToInternalPaymentStatus(status: string): string {\n    return `PAYMENT_STATUS_${status}`;\n}\n\nfunction mapToStoreCredit(payments?: OrderPayments): number {\n    const item = find(payments, { providerId: 'storecredit' });\n\n    return item ? item.amount : 0;\n}\n\nfunction mapToGiftCertificates(payments?: OrderPayments): InternalGiftCertificateList {\n    const items = filter(payments, { providerId: 'giftcertificate' }) as GiftCertificateOrderPayment[];\n\n    return {\n        totalDiscountedAmount: reduce(items, (sum, item) => item.amount + sum, 0),\n        appliedGiftCertificates: keyBy(items.map(item => ({\n            code: item.detail.code,\n            discountedAmount: item.amount,\n            remainingBalance: item.detail.remaining,\n            giftCertificate: {\n                balance: item.amount + item.detail.remaining,\n                code: item.detail.code,\n                purchaseDate: '',\n            },\n        })), 'code'),\n    };\n}\n\nfunction mapToInteralOrderPayment(payments?: OrderPayments, payment: InternalOrderPayment = {}): InternalOrderPayment {\n    const item = find(payments, isDefaultOrderPayment) as GatewayOrderPayment;\n\n    if (!item) {\n        return {};\n    }\n\n    return {\n        id: item.providerId,\n        status: mapToInternalPaymentStatus(item.detail.step),\n        helpText: item.detail.instructions,\n        returnUrl: payment.returnUrl,\n    };\n}\n\nfunction isDefaultOrderPayment(payment: OrderPayment): payment is GatewayOrderPayment {\n    return payment.providerId !== 'giftcertificate' && payment.providerId !== 'storecredit';\n}\n\nfunction mapToInternalSocialDataList(order: Order): { [itemId: string]: InternalSocialDataList } | undefined {\n    const socialDataObject: { [itemId: string]: InternalSocialDataList } = {};\n    const items = [\n        ...order.lineItems.physicalItems,\n        ...order.lineItems.digitalItems,\n    ];\n\n    items.forEach(item => {\n        socialDataObject[item.id] = mapToInternalSocialData(item);\n    });\n\n    return socialDataObject;\n}\n\nfunction mapToInternalSocialData(lineItem: LineItem): InternalSocialDataList {\n    const codes = ['fb', 'tw', 'gp'];\n\n    return codes.reduce((socialData, code) => {\n        const item = lineItem.socialMedia && lineItem.socialMedia.find(item => item.code === code);\n\n        if (!item) {\n            return socialData;\n        }\n\n        socialData[code] = {\n            name: lineItem.name,\n            description: lineItem.name,\n            image: lineItem.imageUrl,\n            url: item.link,\n            shareText: item.text,\n            sharingLink: item.link,\n            channelName: item.channel,\n            channelCode: item.code,\n        };\n\n        return socialData;\n    }, {} as InternalSocialDataList);\n}\n","import { mapToInternalAddress, Address, InternalAddress } from '../address';\nimport { Checkout } from '../checkout';\n\nimport InternalQuote from './internal-quote';\n\n/**\n * @deprecated This mapper is only for internal use only. It is required during\n * the transition period as we are moving to adopt the new storefront API object\n * schema.\n */\nexport default function mapToInternalQuote(checkout: Checkout, shippingAddress?: Address): InternalQuote {\n    const consignment = checkout.consignments && checkout.consignments[0];\n\n    return {\n        orderComment: checkout.customerMessage,\n        shippingOption: consignment && consignment.selectedShippingOption ? consignment.selectedShippingOption.id : undefined,\n        billingAddress: checkout.billingAddress ? mapToInternalAddress(checkout.billingAddress) : {} as InternalAddress,\n        shippingAddress: shippingAddress && mapToInternalAddress(shippingAddress, checkout.consignments),\n    };\n}\n","/**\n * Please note that these mappers are for internal use only. DO NOT USE. They\n * can be removed or changed at any time.\n */\nexport { mapToInternalAddress } from '../address';\nexport { mapToInternalCart } from '../cart';\nexport { mapToInternalCoupon, mapToInternalGiftCertificate } from '../coupon';\nexport { mapToInternalCustomer } from '../customer';\nexport { mapToInternalLineItem, mapToInternalLineItems } from '../cart';\nexport { mapToInternalOrder } from '../order';\nexport { mapToInternalQuote } from '../quote';\nexport { mapToInternalShippingOption, mapToInternalShippingOptions } from '../shipping';\nexport { CacheKeyResolver } from '../common/utility';\n","module.exports = require(\"lodash\");","export { default as bindDecorator } from './bind-decorator';\nexport { default as createFreezeProxy, createFreezeProxies } from './create-freeze-proxy';\nexport { default as CacheKeyResolver } from './cache-key-resolver';\nexport { default as CancellablePromise } from './cancellable-promise';\nexport { default as getEnvironment } from './get-environment';\nexport { default as isEqual } from './is-equal';\nexport { default as isPrivate } from './is-private';\nexport { default as mergeOrPush } from './merge-or-push';\nexport { default as omitDeep } from './omit-deep';\nexport { default as omitPrivate } from './omit-private';\nexport { default as setPrototypeOf } from './set-prototype-of';\nexport { default as toSingleLine } from './to-single-line';\n","export { default as AmountTransformer } from './amount-transformer';\nexport { default as Cart } from './cart';\nexport { default as InternalCart } from './internal-cart';\nexport { default as InternalLineItem } from './internal-line-item';\nexport { DigitalItem, GiftCertificateItem, LineItem, PhysicalItem } from './line-item';\nexport { default as LineItemMap } from './line-item-map';\n\nexport { default as CartComparator } from './cart-comparator';\nexport { default as cartReducer } from './cart-reducer';\nexport { default as CartRequestSender } from './cart-request-sender';\nexport { default as CartSelector } from './cart-selector';\nexport { default as CartState } from './cart-state';\n\nexport { default as map } from './map-to-internal-cart';\nexport { default as mapGiftCertificateToInternalLineItem } from './map-gift-certificate-to-internal-line-item';\nexport { default as mapToInternalCart } from './map-to-internal-cart';\nexport { default as mapToInternalLineItem } from './map-to-internal-line-item';\nexport { default as mapToInternalLineItems } from './map-to-internal-line-items';\n","export * from './internal-order-responses';\nexport * from './order-actions';\n\nexport { default as Order, GatewayOrderPayment } from './order';\nexport { default as InternalOrder, InternalIncompleteOrder, InternalOrderPayment } from './internal-order';\nexport { default as InternalOrderRequestBody } from './internal-order-request-body';\n\nexport { default as OrderActionCreator } from './order-action-creator';\nexport { default as orderReducer } from './order-reducer';\nexport { default as OrderRequestBody, OrderPaymentRequestBody } from './order-request-body';\nexport { default as OrderRequestSender } from './order-request-sender';\nexport { default as OrderSelector } from './order-selector';\nexport { default as OrderState } from './order-state';\n\nexport { default as mapToInternalOrder } from './map-to-internal-order';\n","export * from './coupon-actions';\nexport * from './gift-certificate-actions';\n\nexport { default as Coupon } from './coupon';\nexport { default as CouponState } from './coupon-state';\nexport { default as InternalCoupon } from './internal-coupon';\nexport { default as CouponActionCreator } from './coupon-action-creator';\nexport { default as CouponRequestSender } from './coupon-request-sender';\nexport { default as CouponSelector } from './coupon-selector';\nexport { default as couponReducer } from './coupon-reducer';\n\nexport { default as GiftCertificate } from './gift-certificate';\nexport { default as GiftCertificateState } from './gift-certificate-state';\nexport { default as InternalGiftCertificate } from './internal-gift-certificate';\nexport { default as GiftCertificateActionCreator } from './gift-certificate-action-creator';\nexport { default as GiftCertificateRequestSender } from './gift-certificate-request-sender';\nexport { default as GiftCertificateSelector } from './gift-certificate-selector';\nexport { default as giftCertificateReducer } from './gift-certificate-reducer';\n\nexport { default as mapToInternalCoupon } from './map-to-internal-coupon';\nexport { default as mapToInternalGiftCertificate } from './map-to-internal-gift-certificate';\n","import Consignment from './consignment';\nimport { InternalShippingOptionList } from './internal-shipping-option';\nimport mapToInternalShippingOption from './map-to-internal-shipping-option';\n\n/**\n * @deprecated This mapper is only for internal use only. It is required during\n * the transition period as we are moving to adopt the new storefront API object\n * schema.\n */\nexport default function mapToInternalShippingOptions(consignments: Consignment[]): InternalShippingOptionList {\n    return consignments.reduce((result, consignment) => {\n        let shippingOptions;\n\n        if (consignment.availableShippingOptions && consignment.availableShippingOptions.length) {\n            shippingOptions = consignment.availableShippingOptions;\n        } else if (consignment.selectedShippingOption) {\n            shippingOptions = [consignment.selectedShippingOption];\n        }\n\n        return {\n            ...result,\n            [consignment.id]: (shippingOptions || []).map(option => {\n                const selectedOptionId = consignment.selectedShippingOption && consignment.selectedShippingOption.id;\n\n                return mapToInternalShippingOption(\n                    option,\n                    option.id === selectedOptionId\n                );\n            }),\n        };\n    }, {});\n}\n","export * from './consignment-actions';\nexport * from './shipping-request-options';\n\nexport { default as createShippingStrategyRegistry } from './create-shipping-strategy-registry';\n\nexport { default as Consignment, ConsignmentsRequestBody, ConsignmentRequestBody } from './consignment';\nexport { default as ConsignmentSelector } from './consignment-selector';\nexport { default as ConsignmentState } from './consignment-state';\nexport { default as consignmentReducer } from './consignment-reducer';\nexport { default as ConsignmentActionCreator } from './consignment-action-creator';\nexport { default as ConsignmentRequestSender } from './consignment-request-sender';\n\nexport { default as ShippingAddressSelector } from './shipping-address-selector';\n\nexport { default as ShippingCountryActionCreator } from './shipping-country-action-creator';\nexport { default as ShippingCountryRequestSender } from './shipping-country-request-sender';\nexport { default as ShippingCountrySelector } from './shipping-country-selector';\nexport { default as ShippingCountryState } from './shipping-country-state';\nexport { default as shippingCountryReducer } from './shipping-country-reducer';\n\nexport { default as ShippingOption } from './shipping-option';\nexport { default as InternalShippingOption, InternalShippingOptionList } from './internal-shipping-option';\n\nexport { default as ShippingStrategyActionCreator } from './shipping-strategy-action-creator';\nexport { default as ShippingStrategySelector } from './shipping-strategy-selector';\nexport { default as ShippingStrategyState } from './shipping-strategy-state';\nexport { default as shippingStrategyReducer } from './shipping-strategy-reducer';\n\nexport { default as mapToInternalShippingOption } from './map-to-internal-shipping-option';\nexport { default as mapToInternalShippingOptions } from './map-to-internal-shipping-options';\n","export interface CompareOptions {\n    keyFilter?(key: string): boolean;\n}\n\nexport default function isEqual(objectA: any, objectB: any, options?: CompareOptions): boolean {\n    if (objectA === objectB) {\n        return true;\n    }\n\n    if (objectA && objectB && typeof objectA === 'object' && typeof objectB === 'object') {\n        if (Array.isArray(objectA) && Array.isArray(objectB)) {\n            return isArrayEqual(objectA, objectB, options);\n        }\n\n        if (Array.isArray(objectA) || Array.isArray(objectB)) {\n            return false;\n        }\n\n        if ((objectA instanceof Date) && (objectB instanceof Date)) {\n            return isDateEqual(objectA, objectB);\n        }\n\n        if ((objectA instanceof Date) || (objectB instanceof Date)) {\n            return false;\n        }\n\n        if ((objectA instanceof RegExp) && (objectB instanceof RegExp)) {\n            return isRegExpEqual(objectA, objectB);\n        }\n\n        if ((objectA instanceof RegExp) || (objectB instanceof RegExp)) {\n            return false;\n        }\n\n        return isObjectEqual(objectA, objectB, options);\n    }\n\n    return objectA === objectB;\n}\n\nfunction isRegExpEqual(objectA: RegExp, objectB: RegExp): boolean {\n    return objectA.toString() === objectB.toString();\n}\n\nfunction isDateEqual(objectA: Date, objectB: Date): boolean {\n    return objectA.getTime() === objectB.getTime();\n}\n\nfunction isArrayEqual(objectA: any[], objectB: any[], options?: CompareOptions): boolean {\n    if (objectA.length !== objectB.length) {\n        return false;\n    }\n\n    for (let index = 0, length = objectA.length; index < length; index++) {\n        if (!isEqual(objectA[index], objectB[index], options)) {\n            return false;\n        }\n    }\n\n    return true;\n}\n\nfunction isObjectEqual(\n    objectA: { [key: string]: any },\n    objectB: { [key: string]: any },\n    options?: CompareOptions\n): boolean {\n    const filter = options && options.keyFilter;\n    const keysA = filter ? Object.keys(objectA).filter(filter) : Object.keys(objectA);\n    const keysB = filter ? Object.keys(objectB).filter(filter) : Object.keys(objectB);\n\n    if (keysA.length !== keysB.length) {\n        return false;\n    }\n\n    for (let index = 0, length = keysA.length; index < length; index++) {\n        const key = keysA[index];\n\n        if (!objectB.hasOwnProperty(key)) {\n            return false;\n        }\n\n        if (!isEqual(objectA[key], objectB[key], options)) {\n            return false;\n        }\n    }\n\n    return true;\n}\n","export { default as Address, AddressRequestBody } from './address';\nexport { default as InternalAddress } from './internal-address';\nexport { default as LegacyAddress } from './legacy-address';\n\nexport { default as isAddressEqual } from './is-address-equal';\nexport { default as isInternalAddressEqual } from './is-internal-address-equal';\n\nexport { default as mapFromInternalAddress } from './map-from-internal-address';\nexport { default as mapToInternalAddress } from './map-to-internal-address';\n","export const HOSTED = 'PAYMENT_TYPE_HOSTED';\nexport const OFFLINE = 'PAYMENT_TYPE_OFFLINE';\n","export default class AmountTransformer {\n    constructor(private _dp: number) {}\n\n    toInteger(amount: number): number {\n        return Math.floor(amount * Math.pow(10, this._dp));\n    }\n}\n","export * from './customer-request-options';\n\nexport { default as InternalCustomer } from './internal-customer';\nexport { default as Customer, CustomerAddress } from './customer';\n\nexport { default as createCustomerStrategyRegistry } from './create-customer-strategy-registry';\nexport { CustomerAction, CustomerActionType } from './customer-actions';\nexport { default as customerReducer } from './customer-reducer';\nexport { default as CustomerActionCreator } from './customer-action-creator';\nexport { default as CustomerCredentials } from './customer-credentials';\nexport { default as CustomerRequestSender } from './customer-request-sender';\nexport { default as CustomerSelector } from './customer-selector';\nexport { default as CustomerState } from './customer-state';\nexport { default as CustomerStrategyActionCreator } from './customer-strategy-action-creator';\nexport { default as CustomerStrategySelector } from './customer-strategy-selector';\nexport { default as CustomerStrategyState } from './customer-strategy-state';\nexport { default as customerStrategyReducer } from './customer-strategy-reducer';\nexport { default as GuestCredentials } from './guest-credentials';\n\nexport { default as mapToInternalCustomer } from './map-to-internal-customer';\n","import InternalLineItem from './internal-line-item';\nimport { LineItem } from './line-item';\nimport LineItemMap from './line-item-map';\nimport mapGiftCertificateToInternalLineItem from './map-gift-certificate-to-internal-line-item';\nimport mapToInternalLineItem from './map-to-internal-line-item';\n\n/**\n * @deprecated This mapper is only for internal use only. It is required during\n * the transition period as we are moving to adopt the new storefront API object\n * schema.\n */\nexport default function mapToInternalLineItems(\n    itemMap: LineItemMap,\n    decimalPlaces: number,\n    idKey: keyof LineItem = 'id'\n): InternalLineItem[] {\n    return (Object.keys(itemMap) as Array<keyof LineItemMap>)\n        .reduce((result, key) => [\n            ...result,\n            ...(itemMap[key] as LineItem[]).map((item: any) => {\n                if (key === 'giftCertificates') {\n                    return mapGiftCertificateToInternalLineItem(item, decimalPlaces);\n                }\n\n                return mapToInternalLineItem(\n                    item,\n                    mapToInternalLineItemType(key),\n                    decimalPlaces,\n                    idKey\n                );\n            }),\n        ], [] as InternalLineItem[]);\n}\n\nfunction mapToInternalLineItemType(type: string): string {\n    switch (type) {\n        case 'physicalItems':\n            return 'ItemPhysicalEntity';\n\n        case 'digitalItems':\n            return 'ItemDigitalEntity';\n\n        case 'giftCertificates':\n            return 'ItemGiftCertificateEntity';\n\n        default:\n            return '';\n    }\n}\n","import isEqual from './is-equal';\n\nexport default class CacheKeyResolver {\n    private _lastId = 0;\n    private _maps: CacheKeyMap[] = [];\n\n    getKey(...args: any[]): string {\n        const { index, map, parentMaps } = this._resolveMap(...args);\n\n        if (map && map.cacheKey) {\n            map.usedCount++;\n\n            return map.cacheKey;\n        }\n\n        return this._generateKey(parentMaps, args.slice(index));\n    }\n\n    getUsedCount(...args: any[]): number {\n        const { map } = this._resolveMap(...args);\n\n        return map ? map.usedCount : 0;\n    }\n\n    private _resolveMap(...args: any[]): ResolveResult {\n        let index = 0;\n        let parentMaps = this._maps;\n\n        while (parentMaps.length) {\n            let isMatched = false;\n\n            for (const map of parentMaps) {\n                if (!isEqual(map.value, args[index])) {\n                    continue;\n                }\n\n                if ((args.length === 0 || index === args.length - 1) && map.cacheKey) {\n                    return { index, map, parentMaps };\n                }\n\n                isMatched = true;\n                parentMaps = map.maps;\n                index++;\n\n                break;\n            }\n\n            if (!isMatched) {\n                break;\n            }\n        }\n\n        return { index, parentMaps };\n    }\n\n    private _generateKey(maps: CacheKeyMap[], args: any[]): string {\n        let index = 0;\n        let parentMaps = maps;\n        let map!: CacheKeyMap;\n\n        do {\n            map = {\n                usedCount: 1,\n                value: args[index],\n                maps: [],\n            };\n\n            parentMaps.push(map);\n\n            parentMaps = map.maps;\n            index++;\n        } while (index < args.length);\n\n        map.cacheKey = `${++this._lastId}`;\n\n        return map.cacheKey;\n    }\n}\n\ninterface CacheKeyMap {\n    maps: CacheKeyMap[];\n    value: any;\n    usedCount: number;\n    cacheKey?: string;\n}\n\ninterface ResolveResult {\n    index: number;\n    parentMaps: CacheKeyMap[];\n    map?: CacheKeyMap;\n}\n","import InternalLineItem from './internal-line-item';\nimport { GiftCertificateItem } from './line-item';\n\nimport { AmountTransformer } from '.';\n\nexport default function mapGiftCertificateToInternalLineItem(\n    item: GiftCertificateItem,\n    decimalPlaces: number\n): InternalLineItem {\n    const amountTransformer = new AmountTransformer(decimalPlaces);\n\n    return {\n        id: item.id,\n        imageUrl: '',\n        name: item.name,\n        amount: item.amount,\n        amountAfterDiscount: item.amount,\n        discount: 0,\n        integerAmount: amountTransformer.toInteger(item.amount),\n        integerAmountAfterDiscount: amountTransformer.toInteger(item.amount),\n        integerDiscount: 0,\n        quantity: 1,\n        sender: item.sender,\n        recipient: item.recipient,\n        type: 'ItemGiftCertificateEntity',\n        attributes: [],\n        variantId: null,\n    };\n}\n","import AmountTransformer from './amount-transformer';\nimport InternalLineItem from './internal-line-item';\nimport { DigitalItem, LineItem } from './line-item';\n\n/**\n * @deprecated This mapper is only for internal use only. It is required during\n * the transition period as we are moving to adopt the new storefront API object\n * schema.\n */\nexport default function mapToInternalLineItem(\n    item: LineItem,\n    type: string,\n    decimalPlaces: number,\n    idKey: keyof LineItem = 'id'\n): InternalLineItem {\n    const amountTransformer = new AmountTransformer(decimalPlaces);\n\n    return {\n        id: (item[idKey] as string | number),\n        imageUrl: item.imageUrl,\n        amount: item.extendedListPrice,\n        amountAfterDiscount: item.extendedSalePrice,\n        discount: item.discountAmount,\n        integerAmount: amountTransformer.toInteger(item.extendedListPrice),\n        integerAmountAfterDiscount: amountTransformer.toInteger(item.extendedSalePrice),\n        integerDiscount: amountTransformer.toInteger(item.discountAmount),\n        downloadsPageUrl: (item as DigitalItem).downloadPageUrl,\n        name: item.name,\n        quantity: item.quantity,\n        brand: item.brand,\n        categoryNames: item.categoryNames,\n        variantId: item.variantId,\n        productId: item.productId,\n        attributes: (item.options || []).map(option => ({\n            name: option.name,\n            value: option.value,\n        })),\n        addedByPromotion: item.addedByPromotion,\n        type,\n    };\n}\n","import { keyBy, reduce, some } from 'lodash';\n\nimport { Checkout } from '../checkout';\nimport { mapToInternalCoupon, mapToInternalGiftCertificate } from '../coupon';\nimport { mapToDiscountNotifications } from '../promotion';\n\nimport { AmountTransformer } from '.';\nimport InternalCart from './internal-cart';\nimport mapToInternalLineItems from './map-to-internal-line-items';\n\n/**\n * @deprecated This mapper is only for internal use only. It is required during\n * the transition period as we are moving to adopt the new storefront API object\n * schema.\n */\nexport default function mapToInternalCart(checkout: Checkout): InternalCart {\n    const decimalPlaces = checkout.cart.currency.decimalPlaces;\n    const amountTransformer = new AmountTransformer(decimalPlaces);\n\n    return {\n        id: checkout.cart.id,\n        items: mapToInternalLineItems(checkout.cart.lineItems, decimalPlaces),\n        currency: checkout.cart.currency.code,\n        coupon: {\n            discountedAmount: reduce(checkout.cart.coupons, (sum, coupon) => {\n                return sum + coupon.discountedAmount;\n            }, 0),\n            coupons: checkout.cart.coupons.map(mapToInternalCoupon),\n        },\n        discount: {\n            amount: checkout.cart.discountAmount,\n            integerAmount: amountTransformer.toInteger(checkout.cart.discountAmount),\n        },\n        discountNotifications: mapToDiscountNotifications(checkout.promotions),\n        giftCertificate: {\n            totalDiscountedAmount: reduce(checkout.giftCertificates, (sum, certificate) => {\n                return sum + certificate.used;\n            }, 0),\n            appliedGiftCertificates: keyBy(checkout.giftCertificates.map(mapToInternalGiftCertificate), 'code'),\n        },\n        shipping: {\n            amount: checkout.shippingCostTotal,\n            integerAmount: amountTransformer.toInteger(checkout.shippingCostTotal),\n            amountBeforeDiscount: checkout.shippingCostBeforeDiscount,\n            integerAmountBeforeDiscount: amountTransformer.toInteger(checkout.shippingCostBeforeDiscount),\n            required: some(checkout.cart.lineItems.physicalItems, lineItem => lineItem.isShippingRequired),\n        },\n        subtotal: {\n            amount: checkout.subtotal,\n            integerAmount: amountTransformer.toInteger(checkout.subtotal),\n        },\n        storeCredit: {\n            amount: checkout.customer ? checkout.customer.storeCredit : 0,\n        },\n        taxSubtotal: {\n            amount: checkout.taxTotal,\n            integerAmount: amountTransformer.toInteger(checkout.taxTotal),\n        },\n        taxes: checkout.taxes,\n        taxTotal: {\n            amount: checkout.taxTotal,\n            integerAmount: amountTransformer.toInteger(checkout.taxTotal),\n        },\n        handling: {\n            amount: checkout.handlingCostTotal,\n            integerAmount: amountTransformer.toInteger(checkout.handlingCostTotal),\n        },\n        grandTotal: {\n            amount: checkout.grandTotal,\n            integerAmount: amountTransformer.toInteger(checkout.grandTotal),\n        },\n    };\n}\n","import { DiscountNotification } from '../discount';\n\nimport { Promotion } from '.';\n\nexport default function mapToDiscountNotifications(promotions?: Promotion[]): DiscountNotification[] {\n    const notifications: DiscountNotification[] = [];\n\n    (promotions || []).forEach(promotion => {\n        (promotion.banners || []).forEach(banner => {\n            notifications.push({\n                placeholders: [],\n                discountType: null,\n                message: '',\n                messageHtml: banner.text,\n            });\n        });\n    });\n\n    return notifications;\n}\n","import InternalShippingOption from './internal-shipping-option';\nimport ShippingOption from './shipping-option';\n\n/**\n * @deprecated This mapper is only for internal use only. It is required during\n * the transition period as we are moving to adopt the new storefront API object\n * schema.\n */\nexport default function mapToInternalShippingOption(option: ShippingOption, isSelected: boolean): InternalShippingOption {\n    return {\n        description: option.description,\n        module: option.type,\n        price: option.cost,\n        id: option.id,\n        selected: isSelected,\n        isRecommended: option.isRecommended,\n        imageUrl: option.imageUrl,\n        transitTime: option.transitTime,\n    };\n}\n","import Coupon from './coupon';\nimport InternalCoupon from './internal-coupon';\n\nconst couponTypes = [\n    'per_item_discount',\n    'percentage_discount',\n    'per_total_discount',\n    'shipping_discount',\n    'free_shipping',\n];\n\n/**\n * @deprecated This mapper is only for internal use only. It is required during\n * the transition period as we are moving to adopt the new storefront API object\n * schema.\n */\nexport default function mapToInternalCoupon(coupon: Coupon): InternalCoupon {\n    return {\n        code: coupon.code,\n        discount: coupon.displayName,\n        discountType: couponTypes.indexOf(coupon.couponType),\n    };\n}\n","import { isBillingAddressLike } from '../billing';\nimport BillingAddress from '../billing/billing-address';\nimport { Consignment } from '../shipping';\n\nimport Address from './address';\nimport InternalAddress from './internal-address';\n\n/**\n * @deprecated This mapper is only for internal use only. It is required during\n * the transition period as we are moving to adopt the new storefront API object\n * schema.\n */\nexport default function mapToInternalAddress(address: Address | BillingAddress, consignments?: Consignment[]): InternalAddress {\n    let addressId;\n\n    if (isBillingAddressLike(address)) {\n        addressId = address.id;\n    } else if (consignments && consignments.length) {\n        addressId = consignments[0].id;\n    }\n\n    return {\n        id: addressId,\n        firstName: address.firstName,\n        lastName: address.lastName,\n        company: address.company,\n        addressLine1: address.address1,\n        addressLine2: address.address2,\n        city: address.city,\n        province: address.stateOrProvince,\n        provinceCode: address.stateOrProvinceCode,\n        postCode: address.postalCode,\n        country: address.country,\n        countryCode: address.countryCode,\n        phone: address.phone,\n        customFields: address.customFields,\n    };\n}\n","import Address from '../address/address';\n\nimport BillingAddress from './billing-address';\n\nexport default function isBillingAddressLike(address: Address): address is BillingAddress {\n    const billingAddress = address as BillingAddress;\n\n    return typeof billingAddress.id !== 'undefined';\n}\n"],"sourceRoot":""}